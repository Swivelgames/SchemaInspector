var SchemaInspector=function(){var b=function(a){this.options=a||{}};b.prototype={options:null,items:null,run:function(){this.items=[];return this.getItems()},getItems:function(){if(null!==this.items&&this.items instanceof Array&&0<this.items.length)return this.items;for(var a=document.querySelectorAll('[itemscope][itemtype]:not([itemtype=""])'),d=0;d<a.length;d++){var c=a[d];!0===SchemaUtilities.itemHasNoParent(c)&&this.items.push(this.parseItem(c))}return this.items},parseItem:function(a){return new SchemaItem(a)},
getOption:function(a){return this.options[a]||null},setOption:function(a,d){return this.options[a]=d}};return new b}();var SchemaItem=function(){var b=function(a){this.dom=a;this.init()};b.prototype={dom:null,type:null,schema:null,props:null,init:function(){var a=this.dom.getAttribute("itemtype");a||SchemaUtilities.log("error","Missing itemtype. May cause unexpected issues.");this.setSchema(a);this.props={};this.initProperties();return this},setSchema:function(a){this.schema=a;this.type=a.split(/\//).pop();return this},initProperties:function(){for(var a=this.dom.querySelectorAll("[itemprop]"),d=0;d<a.length;d++){var c=
a[d],b=SchemaUtilities.isPropInScope(c,this),e=c.getAttribute("itemprop");!0===b&&(b=this.props[e],c=this.parseProperty(c),b instanceof Array?this.props[e].push(c):this.props[e]=b?[b,c]:c)}return this},parseProperty:function(a){return null!==a.getAttribute("itemscope")?SchemaInspector.parseItem(a):SchemaUtilities.getPropertyValue(a)}};return b}();var SchemaUtilities=function(){var b=function(){};b.prototype={itemHasNoParent:function(a){for(var b=!0;a&&(a=a.parentElement);)null!==a.getAttribute("itemtype")&&(b=a,a=null);return b},isPropInScope:function(a,b){for(var c=a,f=!1;c&&(c=c.parentElement);)null!==c.getAttribute("itemtype")&&(f=c==b.dom?!0:!1,c=null);return f},getPropertyValue:function(a){switch(a.tagName.toLowerCase()){case "meta":return a.getAttribute("content");case "input":return a.getAttribute("value");case "link":case "a":return a.getAttribute("href");
default:return a.innerHTML}},log:function(a){return console&&console[a]instanceof Function?console[a].apply(console,Array.prototype.splice.call(arguments,1)):!1}};return new b}();
